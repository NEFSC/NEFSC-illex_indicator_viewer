---
title: "Weekly Indicators"
subtitle: "Fishing season 2022"
output:
 html_document:
    code_fold: hide
    toc: true
    toc_depth: 3
    toc_float: true
    number_sections: false
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      message = FALSE, 
                      warning = FALSE,
                      knitr.duplicate.label = "allow")
#knitr::opts_chunk$set(dev="png", options(knitr.duplicate.label = "allow"))

library(rgdal)
library(raster)
library(ggplot2)
library(cowplot)
library(patchwork)
library(flexdashboard)
library(here)
library(vembedr) # maybe use this if ember does not work 
library(embedr) 
library(dplyr)
library(tidyverse)
library(dplyr)
#library(lubridate)
library(ggridges)
# this is for embed_video
#,fig.path = "/images/" )
# knitr::opts_knit$set(base.dir = 'C:/Users/sarah.salois/Desktop/github/khyde/SquidSquad/',
#                    base.url = "/")
# knitr::include_graphics(paste0(getwd(), "/images/ft_locs_depth-with_bathy.png"))

```

```{r, eval = FALSE}

# define paths
#base.dir <- 'https://github.com/khyde/SquidSquad.git'
base.dir <- 'C:/Users/sarah.salois/Desktop/github/khyde/SquidSquad/'
base.url <- '/'
fig.path <- 'images/'

# this is where figures will be sent
paste0(base.dir, fig.path)

# this is where markdown will point for figures
paste0(base.url, fig.path)


#knitr::include_graphics('C:/Users/sarah.salois/Documents/github/khyde/SquidSquad/images/SquidSquadV1.png')
# p5 <- ggdraw() + draw_image('C:/Users/sarah.salois/Documents/github/khyde/SquidSquad/images/SquidSquadV1.png', scale = 0.5)
# plot_grid(p5)


# <div style="display: flex;">

```


```{r}

library(tidyverse)
dt2 <-read.csv('C:/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/weight_lengths_22.csv')
ml_wt_22 <- read.csv('ml_wt_22.csv')


```







![](/Users/sarah.salois/Documents/github/khyde/SquidSquad/images/SquidSquadV1.png){width=20%}

***

> Weekly updates for oceanographic indicators for the Northern Shortfin Squid, 
*Illex illecebrosus*.

***
This page is aimed to provide near-real-time observations of relevant 
oceanographic conditions in the Northwest Atlantic to aid in our understanding 
of the patterns of availability of *Illex*. This page will be updated weekly 
and weekly observations will be retained and accessible via the table of 
contents in the upper left hand corner of this page. 

***


# September
***

## Week 36 (September 4 - September 10)

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold", out.width="100%", eval=FALSE}

knitr::include_graphics(here::here(paste0("images/composites/W_202236-NES-CHLOR_A_SST-STATS_ANOMS-COMPOSITE.png")))

```


#### 2 Week Animation


#### Sea Level Anomaly and Geostrophic velocity

Entire MAB

```{r, fig.show="hold", out.width="50%", eval = FALSE}

 knitr::include_graphics(here::here(paste0("images/ssh/D_MAB_20220823_SLA.png")))
                         
 knitr::include_graphics(here::here(paste0("images/ssh/D_MAB_20220825_SLA.png")))


```


Shelf

```{r, fig.show="hold", out.width="50%", eval = FALSE}

knitr::include_graphics(here::here(paste0("images/ssh/D_SHF_20220823_SLA.png")))
                         
knitr::include_graphics(here::here(paste0("images/ssh/D_SHF_20220825_SLA.png")))

```

*image credit: Adrienne Silver*


#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%", eval=FALSE}


rundate1 = '2021202236'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1,
"_bt.png")))
                        

```



#### Salinity and Subsurface Temperature (Pioneer Array)

```{r, fig.show="hold", out.width='100%', eval=FALSE} 

rundate1 = '202236'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SAL_TMP.png")))
```



```{r, fig.show="hold", out.width='100%', eval=FALSE} 

rundate1 = '202236'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_SURF_SAL_TMP.png")))
```


### Mesoscale features
***

#### JCC August, 2022

```{r, fig.show="hold", out.width="100%", eval=FALSE}

knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220905.png")))

```


```{r, eval=FALSE}
knitr::include_graphics(here::here(paste0("images/jc_charts/jc_2022.png")))

```


*image credit: Jenifer Clark*



### Weekly Catch
***
```{r, fig.show="hold", out.width="100%", eval=FALSE}

rundate <- '202236'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
#                                           rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```


*image credit: Daniel Hocking*

#### Lengths and Weights



### Notes: 
***

# August
***

## Week 35 (August 28 - September 3)

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold", out.width="100%"}

knitr::include_graphics(here::here(paste0("images/composites/W_202235-NES-CHLOR_A_SST-STATS_ANOMS-COMPOSITE.png")))


```

*image credit: Kim Hyde*


#### 2 Week Animation
<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/IDL_OUTPUTS_V2022_ANIMATIONS_SST_DD_20220813_20220826-MUR-V04.1-1KM-NES-SST_15_30-FPS_3.webm" type="video/webm">
</video>

*animation credit: Kim Hyde*


#### Sea Level Anomaly and Geostrophic velocity

Entire MAB

```{r, fig.show="hold", out.width="50%", eval = FALSE}

 knitr::include_graphics(here::here(paste0("images/ssh/D_MAB_20220823_SLA.png")))
                         
 knitr::include_graphics(here::here(paste0("images/ssh/D_MAB_20220825_SLA.png")))


```


Shelf

```{r, fig.show="hold", out.width="50%", eval = FALSE}

knitr::include_graphics(here::here(paste0("images/ssh/D_SHF_20220823_SLA.png")))
                         
knitr::include_graphics(here::here(paste0("images/ssh/D_SHF_20220825_SLA.png")))

```

*image credit: Adrienne Silver*


#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%"}


rundate1 = '2021202235'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1,
"_bt.png")))
                        

```



#### Salinity and Subsurface Temperature (Pioneer Array)

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202235'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SAL_TMP.png")))
```



```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202235'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_SURF_SAL_TMP.png")))
```


### Mesoscale features
***

#### JCC August, 2022

```{r, fig.show="hold", out.width="100%"}

knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220831.png")))

```


```{r, out.width="100%"}
knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220902.png")))


```


*image credit: Jenifer Clark*



### Weekly Catch
***
```{r, fig.show="hold", out.width="100%"}

rundate <- '202235'

knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))

```


*image credit: Daniel Hocking*


#### Lengths and Weights



### Notes: 
***

SIRATES team cruises begin this week!

+ R/V Endeavor: launch AUVs, CTD, VMP to identify and map salinty maximum intrusion (SMax) starting 08/30
+ 70 Deg 45' - 71 Deg 03' W, 40 Deg 20' - 40 Deg 45' N
+ F/V Dyrsten: conduct 20 minute tows using commercial gear on nose, flanks, and core of SMax starting 08/31

TS: Things are slowing down - only two boats for Illex 

+ Trip 1: 7,035 lbs 
+ Trip 2: 9,024 lbs




## Week 34 (August 21 - August 27)

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold", out.width="50%"}

knitr::include_graphics(here::here(paste0("images/composites/220825.237.2331.n19.jpg")))
knitr::include_graphics(here::here(paste0("images/composites/220825.237.1521.n18.jpg")))

```


*image credit: Rutgers*


#### 2 Week Animation


#### Sea Level Anomaly and Geostrophic velocity

Entire MAB

```{r, fig.show="hold", out.width="50%"}

 knitr::include_graphics(here::here(paste0("images/ssh/D_MAB_20220823_SLA.png")))
                         
 knitr::include_graphics(here::here(paste0("images/ssh/D_MAB_20220825_SLA.png")))


```


Shelf

```{r, fig.show="hold", out.width="50%"}

knitr::include_graphics(here::here(paste0("images/ssh/D_SHF_20220823_SLA.png")))
                         
knitr::include_graphics(here::here(paste0("images/ssh/D_SHF_20220825_SLA.png")))

```


*image credit: Adrienne Silver*



#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%"}


rundate1 = '2021202234'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1,
"_bt.png")))
                        

```


#### Salinity and Subsurface Temperature (Pioneer Array)

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202234'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SAL_TMP.png")))
```


```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202234'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_SURF_SAL_TMP.png")))
```



### Mesoscale features
***

#### JCC August, 2022

```{r, fig.show="hold", out.width="50%", eval=FALSE}

knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220817.png")))

knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220819.png")))


```


*image credit: Jenifer Clark*


### Weekly Catch
***
```{r, fig.show="hold", out.width="100%"}

rundate <- '202234'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
#                                           rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```


*image credit: Daniel Hocking*




#### Lengths and Weights



```{r}

ml_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'ML') %>%
  rename(length = PARAM_VALUE_NUM)



ggplot(ml_22, 
       aes(x = length, y = factor(week), fill =  factor(week))) +
  geom_density_ridges(alpha = .8, color = 'white',
                      scale = 2.5, rel_min_height = .01) +
  labs(title = '2022 Illex Lengths', x = 'Length (mm)', y = 'Week', fill = 'Week') +
  guides(color = guide_legend(title = 'Week')) +
  theme_ridges() +
  theme_classic()


```



```{r}
wt_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'WT') %>%
  rename(weight = PARAM_VALUE_NUM)

ggplot(wt_22, 
       aes(x = weight, y = factor(week), fill =  factor(week))) +
  geom_density_ridges(alpha = .8, color = 'white',
                      scale = 2.5, rel_min_height = .01) +
  labs(title = '2022 Illex Weights', x = 'Weight (gm)', y = 'Week', fill = 'Week') +
  guides(color = guide_legend(title = 'Week')) +
  theme_ridges() +
  theme_classic()

```


### Notes: 
***

TS: This past week was slow with only a total of five vessels that landed Illex.

Fishing efforts in both the Northern and Southern MAB this week, may 
contribute to the variation in length and size? 


## Week 33 (August 14 - August 20)

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold", out.width="100%"}


knitr::include_graphics(here::here("images/composites/W_202233-NES-CHLOR_A_SST-STATS_ANOMS-COMPOSITE.png"))

```

*image credit: Kim Hyde*


#### 2 Week Animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/IDL_OUTPUTS_V2022_ANIMATIONS_SST_DD_20220806_20220819-MUR-V04.1-1KM-NES-SST_15_30-FPS_3.webm" type="video/webm">
</video>

*animation credit: Kim Hyde*


#### Sea Level Anomaly and Geostrophic velocity


Entire MAB

```{r, fig.show="hold", out.width="50%"}

 knitr::include_graphics(here::here(paste0("images/ssh/D_MAB_20220816_SLA.png")))
                         
 knitr::include_graphics(here::here(paste0("images/ssh/D_MAB_20220818_SLA.png")))


```


Shelf

```{r, fig.show="hold", out.width="50%"}

knitr::include_graphics(here::here(paste0("images/ssh/D_SHF_20220816_SLA.png")))
                         
knitr::include_graphics(here::here(paste0("images/ssh/D_SHF_20220818_SLA.png")))

```
*image credit: Adrienne Silver*



#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%"}


rundate1 = '2021202233'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1,
"_bt.png")))
                        

```


#### Salinity (Pioneer Array)

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202233'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SAL_TMP.png")))
```



```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202233'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_SURF_SAL_TMP.png")))
```



### Mesoscale features
***

#### JCC August, 2022

```{r, fig.show="hold", out.width="100%"}

#knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220817.png")))

knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220819.png")))


```


```{r, fig.show="hold", out.width="100%"}

knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220817.png")))

#knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220819.png")))


```


*image credit: Jenifer Clark*


### Weekly Catch
***
```{r, fig.show="hold", out.width="100%"}

rundate <- '202233'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
#                                           rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```

*image credit: Daniel Hocking*




#### Lengths and Weights

```{r}

ml_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'ML') %>%
  rename(length = PARAM_VALUE_NUM)



ggplot(ml_22, 
       aes(x = length, y = factor(week), fill =  factor(week))) +
  geom_density_ridges(alpha = .8, color = 'white',
                      scale = 2.5, rel_min_height = .01) +
  labs(title = '2022 Illex Lengths', x = 'Length (mm)', y = 'Week', fill = 'Week') +
  guides(color = guide_legend(title = 'Week')) +
  theme_ridges() +
  theme_classic()


```



```{r}
wt_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'WT') %>%
  rename(weight = PARAM_VALUE_NUM)

ggplot(wt_22, 
       aes(x = weight, y = factor(week), fill =  factor(week))) +
  geom_density_ridges(alpha = .8, color = 'white',
                      scale = 2.5, rel_min_height = .01) +
  labs(title = '2022 Illex Weights', x = 'Weight (gm)', y = 'Week', fill = 'Week') +
  guides(color = guide_legend(title = 'Week')) +
  theme_ridges() +
  theme_classic()

```



### Notes: 
***

AG: There is rather large Warm Core Ring at 40N, 70W, today 08/19. 

+ There was a smaller ring and there were some warm water filaments to the west of the ring this Wednesday 08/17.
+ Seems like the ring moved and joined with that water and formed an anticyclonic ring with shelf water in its core.
+ We need to know how the velocities are lined up for one-ring or two-rings or a combined system. 
+ The southwestern edge of the larger ring in the Clark Chart is also connected to the Gulf Steam

AG: If this feature holds for the week of 8/22 and 8/29, the opportunity for a new intrusion (it probably is happening right now!) on the shelf might be huge!

## Week 32 (August 7 - August 13)

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold", out.width="100%"}

knitr::include_graphics(here::here("images/composites/W_202232-NES-CHLOR_A_SST-STATS_ANOMS-COMPOSITE.png"))

```

*image credit: Kim Hyde*

#### 2 Week Animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/IDL_OUTPUTS_V2022_ANIMATIONS_SST_DD_20220723_20220805-MUR-V04.1-1KM-NES-SST_15_30-FPS_3.webm" type="video/webm">
</video>

*animation credit: Kim Hyde*




#### Sea Level Anomaly and Geostrophic velocity


```{r, fig.show="hold", out.width="50%"}

knitr::include_graphics(here::here(paste0("images/ssh/W_202220809_SLA.jpg")))
                        
knitr::include_graphics(here::here(paste0("images/ssh/W_202220810_SLA.jpg")))


```
*image credit: Adrienne Silver*






#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%"}


rundate1 = '2021202232'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1,
"_bt.png")))
                        

```


#### Salinity

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202232'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SURF_SAL_28.png")))

```


### Mesoscale features
***

#### JCC August, 2022

```{r, fig.show="hold", out.width="50%"}

knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220808.png")))
                         
knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220810.png")))


```

*image credit: Jenifer Clark*


### Weekly Catch
***
```{r, fig.show="hold", out.width="100%"}

rundate <- '202232'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
#                                           rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```

*image credit: Daniel Hocking*

#### Lengths and Weights

```{r}

ml_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'ML') %>%
  rename(length = PARAM_VALUE_NUM)
g1 = ggplot(ml_22 %>% filter(week == 32), aes(x=length)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Length', subtitle = 'Week 32') +
  theme_bw()

g1

```




```{r}
wt_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'WT') %>%
  rename(weight = PARAM_VALUE_NUM)

g2 = ggplot(wt_22 %>% filter(week == 32), aes(x=weight)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Weights', subtitle = 'Week 32') +
  theme_bw()

print(g2)
```





## Week 31 (July 31 - August 6)
***

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold", out.width="50%"}


knitr::include_graphics(here::here("images/composites/sst2_fix_31.png"))

knitr::include_graphics(here::here("images/composites/sst_fix_31.png"))

```

*image credit: Kim Hyde*

#### 2 Week Animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/V2022_ANIMATIONS_SST_DD_20220723_20220805-MUR-V04.1-1KM-NES-SST_15_30-FPS_3.webm" type="video/webm">
</video>

*animation credit: Kim Hyde*

#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%"}


rundate1 = '2021202231'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1,
"_bt.jpeg")))
                        

```


#### Salinity

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202231'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SURF_SAL_28.jpeg")))

```


### Mesoscale features
***

#### JCC August, 2022

```{r, fig.show="hold", out.width="100%"}

knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220805.png")))
                       


```

*image credit: Jenifer Clark*


### Weekly Catch
***
```{r, fig.show="hold", out.width="100%"}

rundate <- '202231'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_",
#                                           rundate, "_SF.png")))
#                         
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```

*image credit: Daniel Hocking*

#### Lengths and Weights

```{r}

ml_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'ML') %>%
  rename(length = PARAM_VALUE_NUM)
g1 = ggplot(ml_22 %>% filter(week == 31), aes(x=length)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Length', subtitle = 'Week 31') +
  theme_bw()

g1

```



```{r}
wt_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'WT') %>%
  rename(weight = PARAM_VALUE_NUM)

g2 = ggplot(wt_22 %>% filter(week == 31), aes(x=weight)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Weights', subtitle = 'Week 31') +
  theme_bw()

print(g2)
```



# July
***


## Week 30 (July 24 - July 30)
***

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold"}

rundate <- '202230'

knitr::include_graphics(here::here(paste0("images/composites/W_", rundate, "-NES-CHLOR_A_SST-STATS_ANOMS-COMPOSITE.png")))

```
*image credit: Kim Hyde*

#### 2 Week Animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/V2022_ANIMATIONS_SST_DD_20220716_20220729-MUR-V04.1-1KM-NES-SST_10_30-FPS_3.webm" type="video/webm">
</video>

*animation credit: Kim Hyde*

#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%"}


rundate1 = '2021202230'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1,
"_bt.png")))
                        

```


#### Salinity

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202230'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SURF_SAL_28.png")))

```


### Mesoscale features
***

#### JCC July, 2022

```{r, fig.show="hold", out.width="50%"}

knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220725.png")))
                        
knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220729.png")))


```

*image credit: Jenifer Clark*


### Weekly Catch
***
```{r, fig.show="hold", out.width="50%"}

rundate <- '202230'

knitr::include_graphics(here::here(paste0("images/study_fleet/W_",
                                          rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```

*image credit: Andrew Jones, Daniel Hocking*


#### Lengths and Weights

```{r}

ml_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'ML') %>%
  rename(length = PARAM_VALUE_NUM)
g3 =ggplot(ml_22 %>% filter(week == 30), aes(x=length)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Length', subtitle = 'Week 30') +
  theme_bw()

```


```{r}
wt_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'WT') %>%
  rename(weight = PARAM_VALUE_NUM)

g4 =ggplot(wt_22 %>% filter(week == 30), aes(x=weight)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Weights', subtitle = 'Week 30') +
  theme_bw()
g4
```

### Notes
***

AG : 

+ The WCR at 72W is not visible in this analysis. There was no analysis on 7/27. So, the last time we saw it was on 7/25. It does not mean that the ring is not there, it might very well be there at subsurface and interacting with the shelfbreak.
+ The squid bridge connecting the WCR at 68W with the Gulf Stream seems to have been absorbed in part by the WCR itself, which makes the WCR at 68W something more than just a physical ring. It has also moved to the west a bit, now centered closer to 68.5W. Need to watch its evolution.


## Week 29 (July 17 - July 23)
***

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold"}

rundate <- '202229'

knitr::include_graphics(here::here(paste0("images/composites/W_", rundate, "-NES-CHLOR_A_SST-STATS_ANOMS-COMPOSITE.png")))

```
*image credit: Kim Hyde*

#### 2 Week Animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/V2022_ANIMATIONS_SST_DD_20220709_20220722-MUR-V04.1-1KM-NES-SST_10_30-FPS_3.webm" type="video/webm">
</video>


#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%"}


rundate1 = '2021202229'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1,
"_bt.jpeg")))
                        

```



#### Salinity

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202229'
knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SURF_SAL_28.png")))
```

### Mesoscale features
***

#### JCC July, 2022

```{r, fig.show="hold", out.width="50%"}

knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220718.png")))
                        
knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220720.png")))


```

```{r, fig.show="hold", out.width="100%"}

knitr::include_graphics(here::here(paste0("images/jc_charts/jc_20220722.png")))
                        

```

*image credit: Jenifer Clark*


### Weekly Catch
***
```{r, fig.show="hold", out.width="100%"}

rundate <- '202229'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
#                                           rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```

*image credit: Daniel Hocking*


#### Lengths and Weights

```{r}

ml_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'ML') %>%
  rename(length = PARAM_VALUE_NUM)
ggplot(ml_22 %>% filter(week == 27), aes(x=length)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Length', subtitle = 'Week 27') +
  theme_bw()

```


```{r}
wt_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'WT') %>%
  rename(weight = PARAM_VALUE_NUM)

ggplot(wt_22 %>% filter(week == 27), aes(x=weight)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Weights', subtitle = 'Week 27') +
  theme_bw()
```

### Notes
***

AG: The MAB shelf from off-Hatteras to Cape Cod has warmed up considerably this week (07/20, 07/21)

GG : Predicts - WCR south of Georges Bank (68 Deg 30' W) would be centered on 71 Deg 00' W on August 26 (36 days from today). 

+ Glen used a westward drift of 6 cm/s (thanks Adrienne!) to figure
out how many days before the center of the WCR is at 71 Deg 00' W. 

## Week 28 (July 10 - July 16)
***

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold"}

rundate <- '202228'

knitr::include_graphics(here::here(paste0("images/composites/W_", rundate, "-NES-CHLOR_A_SST-STATS_ANOMS-COMPOSITE.png")))

```
*image credit: Kim Hyde*



#### 2 Week Animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/V2022_ANIMATIONS_SST_DD_20220702_20220715-MUR-V04.1-1KM-NES-SST-FPS_3.webm" type="video/webm">
</video>


#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%"}


rundate1 = '2021202228'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1,
"_bt.jpeg")))
                        

```


#### Salinity

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202228'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SURF_SAL_28.png")))


```

### Mesoscale features
***

#### JCC July, 2022
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220713.png)


### Weekly Catch
***
```{r, fig.show="hold", out.width="100%"}

rundate <- '202228'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
#                                           rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```

#### Lengths and Weights

```{r}

ml_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'ML') %>%
  rename(length = PARAM_VALUE_NUM)
ggplot(ml_22 %>% filter(week == 28), aes(x=length)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Length', subtitle = 'Week 28') +
  theme_bw()

```



```{r}
wt_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'WT') %>%
  rename(weight = PARAM_VALUE_NUM)

ggplot(wt_22 %>% filter(week == 28), aes(x=weight)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Weights', subtitle = 'Week 28') +
  theme_bw()
```


### Notes
***


## Week 27 (July 03 - July 09)
***

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold"}

rundate <- '202227'

knitr::include_graphics(here::here(paste0("images/composites/W_", rundate, "-NES-CHLOR_A_SST-STATS_ANOMS-COMPOSITE.png")))

```
*image credit: Kim Hyde*


#### 2 Week Animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/V2022_ANIMATIONS_SST_DD_20220625_20220708-MUR-V04.1-1KM-NES-SST-FPS_3.webm" type="video/webm">
</video>



#### Sea Level Anomaly and Geostrophic velocity


```{r, fig.show="hold", out.width="50%"}

knitr::include_graphics(here::here(paste0("images/ssh/W_20220704_SLA.jpg")))
                        
knitr::include_graphics(here::here(paste0("images/ssh/W_20220707_SLA.jpg")))


```

*image credit: Adrienne Silver*



#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%"}

# rundate1 = '202227'
# rundate2 = '202127'
 rundate1 = '2021202227'


knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1,
"_bt.png")))
                        
# knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate2, "_bt.png")))

```


#### Salinity

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202227'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SURF_SAL_28.png")))


```

### Mesoscale features
***
#### JCC July, 2022
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220629.png)


### Weekly Catch
***
```{r, fig.show="hold", out.width="100%"}

rundate <- '202227'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
#                                           rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```

*image credit: Daniel Hocking*

#### Lengths and Weights


```{r}

ml_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'ML') %>%
  rename(length = PARAM_VALUE_NUM)
ggplot(ml_22 %>% filter(week == 27), aes(x=length)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Length', subtitle = 'Week 27') +
  theme_bw()

```


```{r}
wt_22 <- ml_wt_22 %>%
  filter(PARAM_TYPE == 'WT') %>%
  rename(weight = PARAM_VALUE_NUM)

ggplot(wt_22 %>% filter(week == 27), aes(x=weight)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Weights', subtitle = 'Week 27') +
  theme_bw()
```


### Notes
***


# June
***


## Week 26 (June 26 - July 2)
***

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold"}

rundate <- '202226'

knitr::include_graphics(here::here(paste0("images/composites/W_", rundate, "-NES-CHLOR_A_SST-STATS_ANOMS-COMPOSITE.png")))

```
*image credit: Kim Hyde*


#### 2 Week Animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/V2022_ANIMATIONS_SST_DD_20220618_20220701-MUR-V04.1-1KM-NES-SST-FPS_3.webm" type="video/webm">
</video>



#### Sea Level Anomaly and Geostrophic velocity


```{r, fig.show="hold", out.width="50%"}

knitr::include_graphics(here::here(paste0("images/ssh/W_20220628_SLA.jpg")))
                        
knitr::include_graphics(here::here(paste0("images/ssh/W_20220630_SLA.jpg")))


```
*image credit: Adrienne Silver*



#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%"}

# rundate1 = '202225'
# rundate2 = '202125'
rundate1 = '2021202226'


knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1, 
"_bt.png")))
                        
# knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate2, "_bt.png")))
#                         
```

#### Salinity

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202226'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SURF_SAL_28.png")))


```

### Mesoscale features
***
#### JCC June 29, 2022

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220629.png)


### Weekly Catch
***
```{r, fig.show="hold", out.width="100%"}

rundate <- '202226'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
#                                           rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```

*image credit: Daniel Hocking*

#### Lengths and Weights


```{r}
wk26 = dt2 %>% filter(week == 26)

ggplot(wk26, aes(x=length)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Length', subtitle = 'Week 26, 2022') +
  theme_bw()
```


```{r}
ggplot(wk26, aes(x=weight)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Weight', subtitle = 'Week 26, 2022') +
  theme_bw()
```

### Notes
***

## Week 25 (June 12 - June 18)
***

### Oceanographic indicators
***

#### CHL and SST weekly means and anomalies
```{r, fig.show="hold"}

rundate <- '202225'

knitr::include_graphics(here::here(paste0("images/composites/W_", rundate, "-NES-CHLOR_A_SST-STATS_ANOMS-COMPOSITE.png")))

```
#### 2 Week Animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/V2022_ANIMATIONS_SST_DD_20220611_20220624-MUR-V04.1-1KM-NES-SST-FPS_3.webm" type="video/webm">
</video>

#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="50%"}

rundate1 = '202225'
rundate2 = '202125'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1, 
"_bt.png")))
                        
knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate2, "_bt.png")))
                        
```



#### Salinity

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202225'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_UP_INSH_SURF_SAL_28.png")))


```

```{r, fig.show="hold", out.width='100%'} 

rundate1 = '202225'
#rundate2 = '202224'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_SAL_UO.png")))

# knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
# "_sal_temp_UO.png")))
#                         
# knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate2, "_sal_temp_co.png")))
                        
```

### Weekly Catch
***

```{r, fig.show="hold", out.width="100%"}
par(mar = c(4, 4, .1, .1))

rundate <- '202225'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
#                                           rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```

*image credit: Daniel Hocking*


#### Lengths and Weights


```{r}
wk25 = dt2 %>% filter(week == 25)

ggplot(wk25, aes(x=length)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Length', subtitle = 'Week 25, 2022') +
  theme_bw()
```


```{r}
ggplot(wk25, aes(x=weight)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Weight', subtitle = 'Week 25, 2022') +
  theme_bw()
```


### Notes 
***


## Week 24 (June 12 - June 18)
***

### Oceanographic indicators
***
#### CHL and SST weekly means and anomalies

```{r, fig.show="hold"}

rundate <- '202224'

knitr::include_graphics(here::here(paste0("images/composites/W_", rundate, "-NES-CHLOR_A_SST-STATS_ANOMS-COMPOSITE.png")))

```

#### 2 week SST animation
<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/V2022_ANIMATIONS_SST_DD_20220604_20220617-MUR-V04.1-1KM-NES-SST-FPS_3.webm" type="video/webm">
</video>


#### Sea Level Anomaly and Geostrophic velocity


```{r, fig.show="hold", out.width="50%"}

knitr::include_graphics(here::here(paste0("images/ssh/W_20220609_SLA.jpg")))
                        
knitr::include_graphics(here::here(paste0("images/ssh/W_20220614_SLA.jpg")))


```
*image credit: Adrienne Silver*



#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="100%"}

rundate1 = '202224'
#rundate2 = '202124'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1, 
"_bt.png")))
                        
# knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate2, "_bt.png")))
                        
```

#### Salinity

```{r, fig.show="hold", out.width="100%"}

rundate1 = '202224'
#rundate2 = '202224'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_SAL_UO.png")))

# knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
# "_sal_temp_UO.png")))
#                         
# knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate2, "_sal_temp_co.png")))
                        
```


### Mesoscale features
***
#### JCC June 15, 2022

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220615.png)

*image credit: Jenifer Clark*


### Weekly Catch
***
```{r, fig.show="hold", out.width="100%"}
par(mar = c(4, 4, .1, .1))

rundate <- '202224'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
#                                           rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```
*image credit: Daniel Hocking*


#### Lengths and Weights


```{r}
wk24 = dt2 %>% filter(week == 24)

ggplot(wk24, aes(x=length)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Length', subtitle = 'Week 24, 2022') +
  theme_bw()
```


```{r}
ggplot(wk24, aes(x=weight)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Weight', subtitle = 'Week 24, 2022') +
  theme_bw()
```




### Notes 
***

AG: The region between 70W and 65W is very much full of eddy activities.

+ The WCR at 66W/40N has now an elongated extension along the shelf break. 
+ There are signatures of intrusions (yellow within green waters) 
from the WCR at 71W/39N. 

AG: The trough at 67W is connected to a set of CCRs through multiple limbs.  
Curiously, there are FOUR warm eddies to the SOUTH of the GS between 70W and 65W, and two CCRs (68W/35N and 65W/36N). The WCR-CCR pair (67-65W/36N) is a 
robust double vortex (mushroom-like) and we have seen such pairs
in many years while creating the CCR census. So, this region is indeed 
very eddy-active right now, and might lead to interesting GS meadring 
development which will affect the slope and then the shelf.


## Week 23 (June 5 - June 11)
***

### Oceanographic indicators
***

#### SST and SST anomaly
```{r, fig.show="hold", out.width="50%"}
par(mar = c(4, 4, .1, .1))

rundate <- '202223'

knitr::include_graphics(here::here(paste0("images/sst/W_", rundate, "-MUR-V04.1-NES-SST-STATS.png")))

knitr::include_graphics(here::here(paste0("images/sst/W_", rundate, "-WEEK_23_2002_2021-MUR-V04.1-NES-SST-ANOM.png")))

```


#### CHL and CHL anomaly
```{r, fig.show="hold", out.width="50%"}
par(mar = c(4, 4, .1, .1))

rundate <- '202223'

knitr::include_graphics(here::here(paste0("images/chl/W_", rundate, "-GLOBCOLOUR-R2019-NES-CHLOR_A-GSM-STATS.png")))

knitr::include_graphics(here::here(paste0("images/chl/W_", rundate, "-WEEK_23_1998_2021-GLOBCOLOUR-R2019-NES-CHLOR_A-GSM-ANOM.png")))
```
*image credit: Kim Hyde*

#### 2 week SST animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/V2022_ANIMATIONS_SST_DD_20220528_20220610-MUR-V04.1-1KM-NES-SST-FPS_3.webm" type="video/webm">
</video>

#### Sea Level Anomaly and Geostrophic velocity


```{r, fig.show="hold", out.width="50%"}

knitr::include_graphics(here::here(paste0("images/ssh/W_202220607_SLA.jpg")))
                        
knitr::include_graphics(here::here(paste0("images/ssh/W_20220609_SLA.jpg")))
                        
```

#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset

```{r, fig.show="hold", out.width="50%"}

rundate1 = '202223'
rundate2 = '202123'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1, 
"_bt.jpg")))
                        
knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate2, "_bt.png")))
                        
```


#### Salinity

```{r, fig.show="hold", out.width="50%"}

rundate1 = '202223'
rundate2 = '202223'

knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate1, 
"_sal_temp_UO.png")))
                        
knitr::include_graphics(here::here(paste0("images/salinity/W_", rundate2, "_sal_temp_co.png")))
                        
```

### Mesoscale features
***
#### JCC June 06, 2022

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220606.png)
#### JCC June 08 2022
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220608.png)
*image credit: Jenifer Clark*




### Weekly Catch
***
```{r, fig.show="hold", out.width="100%"}
par(mar = c(4, 4, .1, .1))

rundate <- '202223'

# knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
#                                           rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```


#### Lengths and Weights


```{r}
wk23 = dt2 %>% filter(week == 23)

ggplot(wk23, aes(x=length)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Length', subtitle = 'Week 23, 2022') +
  theme_bw()
```


```{r}
ggplot(wk23, aes(x=weight)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Weight', subtitle = 'Week 23, 2022') +
  theme_bw()
```


### Notes 
***

AG: Seems like the two rings are no more attached to the Stream through the shingles. They should follow the ring corridor now and hit the shelf break. 
But it also depend on the Stream meandering northerly or staying flat in 
the coming days. 

GG: I think the two smaller rings may be reabsorbed in the Gulf Stream or
else the seasonal cycle is eroding their temperature contrast. Looking at the Rutgers SST, it looks like there may be a possible squid bridge at
67 Deg W. That bears watching.

AG: That northward meandering is very interesting after 66w. 
The stream water seems to be reaching the shelf at the middle of the Georges
Bank. 



# May
***
> Oceanographic conditions for the month of May 2022 

The plots below contain mapped images of Sea Surface Temperature (SST) and
Chlorophyll A (CHL) and the associated frontal dynamics for both. Additionally, 
you will find the Jenifer Clark charts for this week. 


## Week 22 (May 29 - June 4)
***

### Oceanographic indicators
***
#### SST and SST anomaly
```{r, fig.show="hold", out.width="50%"}
par(mar = c(4, 4, .1, .1))

rundate <- '202222'

knitr::include_graphics(here::here(paste0("images/sst/W_", rundate, "-MUR-V04.1-NES-SST-STATS.png")))
                        
knitr::include_graphics(here::here(paste0("images/sst/W_", rundate, "-WEEK_22_2002_2021-MUR-V04.1-NES-SST-ANOM.png")))
                        
```


#### CHL and CHL anomaly
```{r, fig.show="hold", out.width="50%"}
par(mar = c(4, 4, .1, .1))

rundate <- '202222'

knitr::include_graphics(here::here(paste0("images/chl/W_", rundate, "-GLOBCOLOUR-R2019-NES-CHLOR_A-GSM-STATS.png")))
                        
knitr::include_graphics(here::here(paste0("images/chl/W_", rundate, "-WEEK_22_1998_2021-GLOBCOLOUR-R2019-NES-CHLOR_A-GSM-ANOM.png")))
                        
```
*image credit: Kim Hyde*

#### 2 week SST animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/V2022_ANIMATIONS_SST_DD_20220521_20220603-MUR-V04.1-1KM-NES-SST-FPS_3.webm" type="video/webm">
</video>

*video credit: Kim Hyde*

#### Sea Level Anomaly and Geostrophic velocity

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/ssh/W_202222_SLA.png){width=100%}
*image credit: Adrienne Silver*


```{r, eval = FALSE}

# rundate <- '202222'
# 
# knitr::include_graphics(here::here(paste0("images/ssh/W_", rundate, "_SLA.png")))
#                         
#                         
```


#### Bottom Temperature from [EMOLT](http://emolt.org/telemetry.html) dataset


```{r, fig.show="hold", out.width="50%"}

rundate1 = '202222'
rundate2 = '202122'

knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate1, 
"_bt.jpg")))
                        
knitr::include_graphics(here::here(paste0("images/bottom_temp/W_", rundate2, "_bt.png")))
                        
```




### Mesoscale features
***

#### JCC May 30, 2022

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220530.png)
*image credit: Jenifer Clark*

> Key observations from AG:
>
> + Significant warming all along the shelf break 
> + **Gulf Stream** is reaching **79F**
> + **Slope** is at **68-70F**
> + **Shelf** is between **62-65F** 
> + **Georges Bank** is much cooler at **48F**. 
> + A band of 55-56F water is penetrating from the Northeast in to the   slope region (**blue water**) as well.


### Weekly catch 
***

```{r, figures-catchside2, fig.show="hold", out.width="50%"}
par(mar = c(4, 4, .1, .1))

rundate <- '202222'

 knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```
*image credit: Andy Jones, Daniel Hocking*


#### Lengths and Weights


```{r}
wk22 = dt2 %>% filter(week == 22)

ggplot(wk22, aes(x=length)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Length', subtitle = 'Week 22, 2022') +
  theme_bw()
```


```{r}
ggplot(wk22, aes(x=weight)) + 
  geom_histogram(aes(y=..density..), colour="black", fill="white")+
  geom_density(alpha=.2, fill="#FF6666") + 
  labs(title = 'Weight', subtitle = 'Week 22, 2022') +
  theme_bw()
```





### Salinity 
***

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/salinity/W_202222_SAL_OFFSHORE.png)

### Notes
***

JM - NCOM observations:  

+ Most of the surface transport seems to be from the shelf to the slope sea 
  rather than from the Gulf-Stream/Slope Sea to the Shelf
+ There has been a persistent (*weeks to month*) meander set up with 
  South- South Eastward current in the same location - along the line 
  from Rhode Island to Bermuda 

GG :

+ Incredibly rich submesoscale field over the slope right now
+ Shelf water is extending further offshore than usual between 70 and 73,5 W
+ There is a long thin shingle of Gulf Stream water North of the main core. Lots of small eddies that carry water from the shelf and from the Gulf Stream.
+ One interesting note - the big Warm Core Ring to the southeast of Georges Bank, has a shelf streamer wrapped almost entirely around it. But to the west of the shelf streamer it still seems like there is warm Gulf Stream water carried north towards the shelf.

## Week 21 (May 22 - May 28)
***

### Oceanographic indicators
***

:::: {class='fluid-row'}
::: {class='col-md-6'}

#### Sea Surface Temperature

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/sst/W_202221-MUR-V04.1-NES-SST-STATS.png)

:::

::: {class='col-md-6'}

#### SST Anomaly
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/sst/W_202221-WEEK_21_2003_2021-MUR-V04.1-NES-SST-ANOM.png)
:::
::::

#### CHL and CHL anomaly

```{r, figures-chlside, fig.show="hold", out.width="50%"}
par(mar = c(4, 4, .1, .1))

rundate <- '202221'

knitr::include_graphics(here::here(paste0("images/chl/W_", rundate, "-GLOBCOLOUR-R2019-NES-CHLOR_A-GSM-STATS.png")))
                        
knitr::include_graphics(here::here(paste0("images/chl/W_", rundate, "-WEEK_21_1998_2021-GLOBCOLOUR-R2019-NES-CHLOR_A-GSM-ANOM.png")))
                        
```
*image credit: Kim Hyde*


```{r, eval=FALSE,  out.width="100%"}
# This is too small - html is better viewing
# 2 Week SST animation w/webm in R chunk, 5 fps 
embed_video(here::here('images/animations/DD_20220507_20220520-MUR-V04.1-1KM-NES-SST-FPS_5.webm'))

```


#### 2 week SST animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/DD_20220514_20220527-MUR-V04.1-1KM-NES-SST-FPS_3.webm" type="video/webm">
</video>

*video credit: Kim Hyde*

### Mesoscale features
***

**JCC May 23, 2022**

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220523.png)
*image credit: Jenifer Clark*

### Weekly catch 
***

```{r, figures-catchside, fig.show="hold", out.width="50%"}
par(mar = c(4, 4, .1, .1))

rundate <- '202221'

knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_SF.png")))
                        
knitr::include_graphics(here::here(paste0("images/study_fleet/W_", 
                                          rundate, "_QM.png")))
  
```

*image credit: Andy Jones, Daniel Hocking*

### Salinity
***

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/salinity/W_202221_SAL_OFFSHORE.png)


### Notes
***

+ GG & AS: Shingle starting to wrap around WCR - possible squid bridge connection 

+ AM: Some boats went looking for Illex around the eddies at 65W and 72W last week, but didn’t find much

## Week 20 (May 15 - May 21)
***

### Oceanographic indicators
***

:::: {class='fluid-row'}

::: {class='col-md-6'}

#### Sea Surface Temperature

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/sst/W_202220-MUR-V04.1-NES-SST-STATS_WHALE.png)
:::

::: {class='col-md-6'}

#### Chlorophyll

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/chl/W_202220-GLOBCOLOUR-R2019-NES-CHLOR_A-GSM-STATS.png)
:::
::::
*image credit: Kim Hyde*

#### 2 week SST animation

<video width="500" height="500" controls>
  <source src="/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/animations/DD_20220507_20220520-MUR-V04.1-1KM-NES-SST-FPS_5.webm" type="video/webm">
</video>

*video credit: Kim Hyde*

### Mesoscale features
***

#### JCC May 18, 2022

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220518.png)


#### JCC May 20, 2022

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220520.png)
*image credit: Jenifer Clark*


### Salinity

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/salinity/W_202220-SAL-OFFSHORE.png)

### Notes 
***

AS: May be another shingle forming, keep an eye in coming weeks 

+ Many North Atlantic Right whales located On the NE edge of Grand Banks 
(on the GOM side)
+ Whales not expected in that region
+ Oceanographic conditions that may be aggregating the whales? 
  + Increased flow at bifurcation point at Northern part of channel
  + Increased food availability here? 

+ No *Illex* present in Hudson or Norfolk canyons 


## Week 19 (May 8 - May 14)
***

### Oceanographic indicators
***

#### Sea Surface Temperature

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/sst/W_202219-MUR-V04.1-NES-SST-STATS.png){width=55%}
*image credit: Kim Hyde*


### Mesoscale features
***
:::: {class='fluid-row'}

::: {class='col-md-6'}
**JCC May 09, 2022**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220509.png)
:::

::: {class='col-md-6'}

**JCC May 11, 2022**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220511.png)

:::
::::
*image credit: Jenifer Clark*

### Salinity
***

### Notes
***

AG: Two WCRs in our region -- both connected to the Gulf Stream with individual Squid bridges or streamers.

***

## Week 18 (May 1-7)
***

### Oceanographic indicators
***

:::: {class='fluid-row'}
::: {class='col-md-6'}

#### Sea Surface Temperature

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/sst/W_202218-MUR-V04.1-NES-SST-STATS.png)
:::
::: {class='col-md-6'}

#### Chlorophyll

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/chl/W_202218-GLOBCOLOUR-R2019-NES-CHLOR_A-GSM-STATS.png)
:::
::::
*image credit: Kim Hyde*

### Mesoscale features 
***

:::: {class='fluid-row'}

::: {class='col-md-6'}

**JCC May 04, 2022**

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220504.png)
:::
::: {class='col-md-6'}

**JCC May 06, 2022**

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220506.png)
:::
::::
*image credit: Jenifer Clark*


### Salinity 
***

:::: {class='fluid-row'}
::: {class='col-md-6'}
#### Mean Salinity (Pioneer Array, CENTRAL)
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/salinity/W_202218-SAL-CENTRAL.png)
:::
::: {class='col-md-6'}
#### Mean Salinity (Pioneer Array, INSHORE)
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/salinity/W_202218-SAL-INSHORE.png)
:::
::::

#### Mean Salinity (Pioneer Array, OFFSHORE)
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/salinity/W_202218-SAL-OFFSHORE.png)


#### YTD : Mean Salinity (Pioneer Array, w/2021 reference)
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/salinity/A_2021-2022-SAL-CENTRAL.png)


```{r, eval=FALSE}
# Trial run : 
# This works in chunk but wont knit **
jc_weekly <- list.files(here::here('images/jc_charts'), 
                        pattern = '.png', 
                        full.names = TRUE)
knitr::include_graphics(jc_weekly)
```

```{r, eval=FALSE}
# This works in chunk but wont knit **

knitr::include_graphics(here::here(c("images/jc_charts/jc_0425.jpg", 'images/jc_charts/jc_0427.jpg')))

```

### Notes
***

# April
***

## Week 17 (April 24 - April 30)
***

### Oceanographic indicators

:::: {class='fluid-row'}
::: {class='col-md-6'}

#### Sea Surface Temperature

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/sst/W_202217-MUR-V04.1-NES-SST-STATS.png)
:::

::: {class='col-md-6'}

#### Chlorophyll

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/chl/W_202217-GLOBCOLOUR-R2019-NES-CHLOR_A-GSM-STATS-.png)
:::
::::
*image credit: Kim Hyde*


### Mesoscale features

:::: {class='fluid-row'}
::: {class='col-md-6'}

**JCC April 25, 2022**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220425.png)
:::
::: {class='col-md-6'}
**JCC April 27, 2022**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220427.png)
:::
::::
*image credit: Jenifer Clark*

### Salinity
***

### Notes
***


## Week 16 (April 17 - April 23)
***

### Oceanographic indicators

:::: {class='fluid-row'}
::: {class='col-md-6'}

#### Sea Surface Temperature

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/sst/W_202216-MUR-V04.1-NES-SST-STATS.png)
:::

::: {class='col-md-6'}

#### Chlorophyll

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/chl/W_202216-GLOBCOLOUR-R2019-NES-CHLOR_A-GSM-STATS-.png)
:::
::::
*image credit: Kim Hyde*

### Mesoscale features

### Salinity
***


### Notes
***


## Week 15 (April 10 - April 16)
***

### Oceanographic indicators


### Mesoscale features

:::: {class='fluid-row'}
::: {class='col-md-6'}
**JCC April 11, 2022**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220411.png)
:::
::: {class='col-md-6'}

**JCC April 13, 2022**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220413.png)
:::
::::
*image credit: Jenifer Clark*


### Salinity

### Notes
***

AG: Things are heating up with really warm GS water closing in on the shelf 
break near 67W! 

+ 4/11: As Adrienne predicted last week, there might be a ring forming 
near 67W! And look at the temperature difference between the ring water (72F) 
and the shelf water (48F) next to each other!

+ 4/13: The Gulf Stream has a mind of its own! Look at the huge trough near
 69-70W now!
 
GG: Some remarkable processes revealed in this image, including a possible 
squid bridge to the shelfbreak.

AM: Lots going on out there to keep track of as we inch closer to squid season.
No signs of squid yet, other than some large ones in the bellies of tuna 
offshore

## Week 14 (April 3 - April 9)
***

### Oceanographic indicators


### Mesoscale features 
:::: {class='fluid-row'}

::: {class='col-md-6'}
**JCC April 06, 2022**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220406.png)
:::

::: {class='col-md-6'}
**JCC April 08, 2022**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20220408.png)
:::
::::
*image credit: Jenifer Clark*

### Salinity

### Notes
***

AG: (4/6/22) There is one WCR on the shelf break and a large streamer along the
MAB shelf. A lot of activity to the east of the Ring-meander set up at 65W. 

+ Magdalena who just came back visiting the NESC, notes the water is warm 
out there

AG: (4/8/22) WCR forming at 62-64W and the nice shelf-streamers to just east of 
it and then down along the GS crest's leading edge. 

+ This shelf water (blue band) is also going to interact with the WCR at 
60W in the coming week!

**April Salinity Time Series (Pioneer Array, *in-situ* data)**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/salinity/pa_0422.png)

***
# General Information
***

## Major Canyons 
***

[Major Canyons](https://portal.midatlanticocean.org/visualize/#x=-74.00&y=39.00&z=7&logo=true&controls=true&dls%5B%5D=true&dls%5B%5D=1&dls%5B%5D=3944&basemap=ocean&themes%5Bids%5D%5B%5D=28&tab=active&legends=false&layers=true)

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/general_info/aggCPUEplot_canyons.png)
*image credit: Brooke Lowman*

## Body weight trends across years
***

A quick look at the average body weight data from 1997 through 2019. The data
were derived via subsamples collected from landings from various Illex 
processors. Colors correspond to Paul Rago's qualitative measures of system state, where green indicates  a 'Good' year, pink an 'Average' year and blue a 'Poor' year. 


![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/general_info/wts_by_state.png)


Here we can see the spread across years by fleet. 

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/general_info/wts_by_flt_yr.png) 



The figures below parses out the same information (mean body weight) for each 
week across individual fishing fleets. Here, Wet boats refer to vessels with 
refrigerated sea water or ice holds.


![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/general_info/W_wt_box.png)



## Fishing depths 2021 Fishing Season
***

The figure below highlights the 100 meter isobath and associated fishing depths throughout the 2021 season. 

![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/general_info/ft_locs_depth-with_bathy.png){width = 75%}
*image credit: Kim Hyde*


## NAFO subareas 
*** 

This shape file depicts a range of 20 meters inshore of the shelf break
(200m isobath)

```{r, echo == FALSE, results ='hide', message = FALSE, warning = FALSE}
library(mapdata) # dist2isobath
library(marmap)  # getNOAA.bathy
## bring in bathymetry data from marmap package
pt.baty415 <- getNOAA.bathy(lon1 = -66, lon2 = -76, 
                            lat1 = 35, lat2 = 44, 
                            resolution = 1) #41.5
## get coastline from mapdata 
reg = map_data("world2Hires")
reg = subset(reg, region %in% c('Canada', 'USA', 'Mexico'))
reg$long = (360 - reg$long)*-1 
```



```{r, nafo subareas, message = FALSE, warning = FALSE}
wd =  here::here('shapefiles/')
nafo_shbr <- readOGR(wd,'NAFO_SHELFBREAK', verbose = FALSE)
inshr <- nafo_shbr[nafo_shbr@data$SUBAREA %in% c('NAFO_5ZE_INSHORE', 'NAFO_5ZW_INSHORE','NAFO_6A_INSHORE', 'NAFO_6B_INSHORE','NAFO_6C_INSHORE'),]
```


```{r, eval = FALSE}

# This chunk will extract data across NAFO_SHELFBREAK to get mean values 
# for each subarea

# path = '/nadata/PROJECTS/IDL_PROJECTS/ILLEX_INDICATORS/R_SCRIPTS/SALINITY/RASTERS/WEEKLY'
# bricks <- list.files(path = path,
#                      pattern = glob2rx('b_ww_sal_222m*.tif'),
#                      full.names = TRUE)
# k = 13 # 2020
# btmp <- brick(bricks[k])
# btmp@data@names <- as.numeric(c(1:52))
# tmp2 <- subset(tmp, week == weeks[j])
# rtmp = raster::subset(btmp, which(btmp@data@names == weeks[j]))
# rtmp <- raster('test_inshore.tif')
# sal_222m <-  raster::extract(rtmp, inshr, weights = FALSE,
#                              fun = mean, na.rm = TRUE) 
# #sal_222m[1:5]


```



```{r}
ggplot() + 
  geom_polygon(data = reg, aes(x=long, y = lat, group = group), 
               color = "gray20", fill = "wheat3") +
  coord_sf(xlim = c(-80,-66), ylim = c(33,47)) + 
  geom_polygon(data = inshr, aes(x = long, y = lat, 
                                 group = group, fill = id), 
               color = 'black') +
  # geom_polygon(data = mjr_canyons, aes(x = long, y = lat, 
  #                                      group= group, fill = id), 
  #              color = 'black') +
  # scale_fill_discrete(name ='Canyons',
  #                     labels = c('Hudson', 'Wilmington', 'Norfolk')) +
  geom_contour(data = pt.baty415, aes(x = x, y = y, z = z), 
               breaks = c(-100,-200), colour ="gray20", size = 0.7) +
  scale_fill_discrete(name ='NAFO Subareas',  
                      labels = c('5ze', '5zw', '6a', '6b', '6c'))+
  
  ggtitle(paste0('NES Region')) + 
  theme_minimal()
```




```{r, canyons, eval = FALSE}
# wd = ('C:/Users/sarah.salois/Documents/shape_files')
# canyons <- readOGR(wd, 'major_canyons')
# # reproject data
# # Transform units from UTC (meters) to LatLon (decimal degrees)
# canyons <- spTransform(canyons, CRS('+init=epsg:4326')) # this worked once and now wont
# canyons <- spTransform(canyons,
#                       CRSobj = '+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0')
# crs(canyons) # check
# extent(canyons) # check
# mjr_canyons <- canyons[canyons@data$Name %in% c('Norfolk Canyon',
#                                                 'Wilmington Canyon',
#                                                 'Hudson Canyon'),]
# 
# # different trys to fix projection (longitudes are wrong, extent )
# 
# canyons.sf <- st_as_sf(canyons, crs = '+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0')
# extent(canyons) <- c(-74.34716, -65.91845, 33.74994,37.5575) # was -94.34716,  -85.91845
# 
# # Another try
# canyons.sf <- st_set_crs(canyons, "+proj=utm +zone=18 +ellps=GRS80 +datum=NAD83") 
# canyons.sf <- st_set_crs(canyons.sf, 
#                          '+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0') 
# test.sp <- canyons.sf %>% as("Spatial") # From sf to spatial
# extent(test.sp)
# 
# canyons@polygons@coords
# canyons$long = (360 - canyons$long)*-1 
# extent(canyons_WGS84)

```




```{r, echo = FALSE, messages = FALSE, eval = FALSE}
# Canyon projection wrong (see longitude) - fix and add to previous figure

ggplot() +
  geom_polygon(data = mjr_canyons, aes(x = long, y = lat, 
                                 group= group, fill = id), 
                                 color = 'black') +
  scale_fill_discrete(name ='Canyons',
                         labels = c('Hudson', 'Wilmington', 'Norfolk')) +
  theme_minimal()
```

# 2021 Case Study

> JULY 25- 31: Industry noted that squid seemed to have disappeared off the 
shelf after being present in high abundance for the last few months. 

Looking into the oceanographic conditions, team realized there was an increase
in sea surface temperature of about 5 degrees over the course of one week. 
Additionally, they noted continued westward propagation of warm ring/GS water,
hypothesized to be dispersing or redistributing the squid.

Below are some figures generated and annotated by Avijit Gangopadhyay and
Glen Gawarkiewicz

:::: {class='fluid-row'}

::: {class='col-md-6'}
**JCC: July 23 2021**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20210723.png)
:::
  
::: {class='col-md-6'}
**JCC: July 26 2021**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20210726.png)
:::
::::

:::: {class='fluid-row'}

::: {class='col-md-6'}

**JCC: August 2 2021**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20210802.png)

:::

::: {class='col-md-6'}

**JCC: August 4 2021**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/jc_charts/jc_20210804.png)

:::
::::
*image credit: Jenifer Clark*

Avijit noted: Temperature along the shelfbreak
(from SNE to south of Georges Bank) was about 75F on 7/23/21, increases to
about 78-80 on 7/26/21 with mostly westward flow along the shelf break 
(below Georges Bank) with another WCR covering the SNE shelf (this WCR has 
colder shelf water in its core – this happened due to the WCR entraining a 
shelf streamer the previous week). Finally, the whole shelfbreak seems to be
warm with temperature at about 79-81 all along SNE and South of the
Northeast Channel.

+ There is an overall tendency of the warm GS/Ring water flowing westward and 
flooding the shelfbreak. Is this interacting or part of the shelf break jet 
itself? 

+ High temperature all along the shelf break with a train of along-shelf 
features more like a warm blob. Could it be a new marine heat wave?


**In-situ Salinity time series for the  month of July 2021 (from Pioneer Array)**
![](/Users/sarah.salois/Documents/github/ssalois1/NEFSC-illex_indicator_viewer/images/salinity/pa_0721.png)
*image credit: Glen Gawarkiewicz*

Glen noted: "About a week ago there was a big drop (nearly 1 psu) in salinity at
the inshore Pioneer Array mooring at 7 m depth. This is indicative of a big
retreat of the slope/ring water. The salinity dropped from around 34.2 to 
around 33.2 on July 27. Salinities on the outer shelf were very high during 
the Armstrong cruise the second half of June. The shelf break front was in an 
anomalously shoreward position, probably 20 NM shoreward of the usual position
during the Armstrong cruise June 18-July 2. The shelf break front also was 
anomalously onshore south of Hudson Canyon recently from Rutgers glider
transects. What is interesting over the past 2-3 months is the large number of 
rings. Ring influence on the outer shelf has been pronounced throughout the 
entire MAB. I wonder if the front popping back to its normal position has 
occurred over a large area. We will have to think about ways to test this
(altimeter?)."

+ This is really important to figure out why a pulse would end as well as why
it would begin.

Avijit's response: "We should look at altimetry. Contours and their movement as 
well as cross track velocities which will resolve the SBF better. That will tell
us a lot. We could also look at winds! And offshore changes might be captured
by the few argo floating in these rings. Their trajectories might have changed
from a ring-silo configuration to a ring-coalescence configuration." 


> AUGUST 7, 2021 : Industry reports fishing has resumed, starting in a piece of
water around Wilmington and Spencers canyon.

JM: The fishing was reportedly not as good as it was a month prior and one 
harvester reported seeing a change in size frequency of fish available during 
the last trip from larger to smaller. 










```{r echo = FALSE, results = 'asis', eval = FALSE}
# Below is a table which highlights the mean values for Bottom Temperature, 
# Salinity across the shelf break, broken up into 5 NAFO subareas of interest, 
# 5zE, 5zW, 6A, 6B, 6C



library(knitr)
kable(mtcars[1:5, ], caption = "Sub-surface features across time")
# Create a dataframe with BT, Salinity across each zone for years of interest
```


```{r, eval = FALSE}
jc_img <- system.file('jc_0425.jpg', 'jc0427.jpg', package = "cowplot")
plot_grid(
  p + theme(legend.position = c(1, 1), legend.justification = c(1, 1)),
  p2,
  labels = "AUTO"
)

p1 <- ggdraw() +
  draw_image('C:/Users/sarah.salois/Documents/github/khyde/SquidSquad/images/jc_425_v2.png', 
             scale = 0.9)
p2 <- ggdraw() + 
  draw_image('C:/Users/sarah.salois/Documents/github/khyde/SquidSquad/images/jc0427.jpg', 
             scale = 1.0)
plot_grid(p1, p2)

```



```{r, eval = FALSE}
# Would need to play around with image / grid size, not as flexible as columns
p1 <- ggdraw() + draw_image('C:/Users/sarah.salois/Documents/github/khyde/SquidSquad/images/M_201606-MUR-V04.1-NES-SST-STATS-MEAN.png', scale = 1.0)
p2 <- ggdraw() + draw_image('C:/Users/sarah.salois/Documents/github/khyde/SquidSquad/images/M_201603-OCCCI-V5.0-NES-CHLOR_A-CCI-STATS-STD.png', scale = 1.0)
p3 <- ggdraw() + draw_image('C:/Users/sarah.salois/Documents/github/khyde/SquidSquad/images/W_201638-GLORYS-NES-BOTTOM_TEMPERATURE-WCR-CHLFRONTS.png', scale = 1.0)
# p3 <- ggdraw() + draw_image('C:/Users/sarah.salois/Documents/github/khyde/SquidSquad/images/jc0425.jpg', scale = 0.9)

p4 <- ggdraw() + draw_image('C:/Users/sarah.salois/Documents/github/khyde/SquidSquad/images/jc0427.jpg', scale = 1.0)
plot_grid(p1, p2, p3, p4)
```

```{r, eval = FALSE}
# Another way to include images
# knitr::include_graphics('C:/Users/sarah.salois/Documents/github/khyde/SquidSquad/images/M_201606-MUR-V04.1-NES-SST-STATS-MEAN.png')

```